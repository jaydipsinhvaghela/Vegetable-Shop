{% extends 'template.html' %}
{% load static %}
{% block content %}
<section class="breadscrumb-section pt-0">
     <div class="container-fluid-lg">
          <div class="row">
               <div class="col-12">
                    <div class="breadscrumb-contain">
                         <h2 class="mb-2">Log In</h2>
                    </div>
               </div>
          </div>
     </div>
</section>

<section class="log-in-section background-image-2 section-b-space">
     <div class="container-fluid-lg w-100">
          <div id="message">
          </div>
          <div class="row">
               <div class="col-xxl-6 col-xl-5 col-lg-6 d-lg-block d-none ms-auto">
                    <div class="image-contain">
                         <img src="{% static 'assets/images/inner-page/log-in.png' %}" class="img-fluid" alt="">
                    </div>
               </div>
               <div class="col-xxl-4 col-xl-5 col-lg-6 col-sm-8 mx-auto">
                    <div class="log-in-box">
                         <div class="log-in-title">
                              <h3>Welcome To Fastkart</h3>
                              <h4>Log In Your Account</h4>
                         </div>
                         <div class="input-box">
                              <form class="row g-4" method="post" action="login">
                                   {% csrf_token %}
                                   <div class="col-12">
                                        <div class="form-floating theme-form-floating log-in-form">
                                             <input type="email" class="form-control" id="email"
                                                  placeholder="Email Address" name="email" required>
                                             <label for="email">Email Address</label>
                                        </div>
                                   </div>
                                   <div class="col-12">
                                        <div class="form-floating theme-form-floating log-in-form">
                                             <input type="password" class="form-control" id="password"
                                                  placeholder="Password" name="password" required>
                                             <label for="password">Password</label>
                                        </div>
                                   </div>
                                   <div class="col-12">
                                        <div class="forgot-box">
                                             <a href="forgot_password" class="forgot-password">Forgot Password?</a>
                                        </div>
                                   </div>
                                   <div class="col-12">
                                        <button class="btn btn-animation w-100 justify-content-center" type="submit">Log
                                             In</button>
                                   </div>
                              </form>
                         </div>
                         <div class="other-log-in">
                              <h6>or</h6>
                         </div>
                         <div class="sign-up-box">
                              <h4>Don't have an account?</h4>
                              <a href="register">Sign Up</a>
                         </div>
                    </div>
               </div>
          </div>
     </div>
</section>
<script>
     $(document).ready(function () {
          console.log("Jquery working ");
          var data = "{{ message | escapejs }}";
          var response = "{{ response | escapejs }}";
          console.log(response);
          if (data !== '') {
               if (response == '0') {
                    $('#message').html(`<div class="alert alert-danger alert-dismissible fade show" role="alert">
                                        <strong>Password must be at least 8 Characters </strong>.
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                        </div>`);
               }
               if (response == '1') {
                    $('#message').html(`<div class="alert alert-danger alert-dismissible fade show" role="alert">
                                        <strong>Please enter a valid email address  </strong>.
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                        </div>`);
               }

               if (response == '2') {
                    $('#message').html(`<div class="alert alert-success alert-dismissible fade show" role="alert">
                                        <strong>Register Successfully  </strong>.
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                        </div>`);
               }

          }
          const urldiyss = new URLSearchdiyss(window.location.search);
          const password = urldiyss.get('password');
          console.log(password);
          if (password == 'yes') {
               $('#message').html(`<div class="alert alert-success alert-dismissible fade show" role="alert">
                                        <strong>Password Change Successfully  </strong>.
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                        </div>`);
          }
     })
</script>
{% endblock %}